create view v_chits as
select
cc.id, cc.name, cc.frontname, ii.name backname
from
images ii,
(select 
c.id, c.name, i.name frontname, c.back
from
  images i,
  chits  c
where
c.front = i.id
and
c.is_chit = 1
) cc
where
cc.back = ii.id
;













alter table chits
 add is_chit integer default 1;












create view v_all as
select
cc.id, cc.name, cc.frontname, ii.name backname
from
images ii,
(select 
c.id, c.name, i.name frontname, c.back
from
  images i,
  chits  c
where
c.front = i.id

) cc
where
cc.back = ii.id
;
























create view v_units as
select
cc.id, cc.name, cc.frontname, ii.name backname
from
images ii,
(select 
c.id, c.name, i.name frontname, c.back
from
  images i,
  chits  c
where
c.front = i.id
and
c.is_unit = 1
) cc
where
cc.back = ii.id
;













alter table chits
 add is_unit integer default 0;






create view v_chits as
select
cc.id, cc.name, cc.frontname, ii.name
from
images ii,
(select 
c.id, c.name, i.name frontname, c.back
from
  images i,
  chits  c
where
c.front = i.id) cc
where
cc.back = ii.id
;







select 
c.id, c.name, i.name frontname, c.back
from
  images i,
  chits  c
where
c.front = i.id
;





sqlite> .schema images
CREATE TABLE IF NOT EXISTS "images" (
   id integer not null,
   name varchar(255)
);
sqlite> .schema chits
CREATE TABLE chits (
   id integer not null,
   name varcher(255),
   front integer,
   back integer
);

















CREATE TABLE chits (
   id integer not null,
   name varchar(255)
);

.import --csv --skip 1 --schema temp C:/work/somedata.csv tab1




.import --csv --skip 1 chits.csv chits


alter table chits rename to images;



CREATE TABLE chits (
   id integer not null,
   name varcher(255),
   front integer,
   back integer
);

.import --csv chits.csv chits

106

